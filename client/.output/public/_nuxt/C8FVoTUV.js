import{aZ as l,Z as i,a4 as h}from"#entry";import{u as o}from"./QHQVrWkE.js";const d=l("websiteStore",{state:()=>({isLoading:!1,status:null,error:null,items:null,total:0,currentPage:1,totalPages:1,itemsAsc:null,itemsDesc:null,itemsHealthy:null,itemsResponseTime:null,itemsDown:null}),persist:{storage:sessionStorage},actions:{async createWebsite(r){const{$axios:s}=i(),t=h(),a=o();this.isLoading=!0,this.error=null;try{const e=await s.post("/websites",r,{headers:{Authorization:`${a.type} ${a.token}`}});this.status=e.status,this.items=e.data.data,t.push(`/admins/websites/${this.items.id}`)}catch(e){this.status=e.response?.status||500,this.error=e.response?.data?.errors||"Internal server error. Please try again later."}finally{this.isLoading=!1}},async updateWebsite(r,s){const{$axios:t}=i(),a=h(),e=o();this.isLoading=!0,this.error=null;try{const n=await t.put(`/websites/${r}`,s,{headers:{Authorization:`${e.type} ${e.token}`}});this.status=n.status,this.items=n.data.data,a.push(`/admins/websites/${r}`)}catch(n){this.status=n.response?.status||500,this.error=n.response?.data?.errors||"Internal server error. Please try again later."}finally{this.isLoading=!1}},async getWebsites(r=1){const{$axios:s}=i(),t=o(),a=10;this.isLoading=!0,this.error=null;try{const e=await s.get(`/websites?page=${r}&size=${a}`,{headers:{Authorization:`${t.type} ${t.token}`}});this.status=e.status,this.items=e.data.data,this.total=e.data.meta.total,this.currentPage=e.data.meta.page,this.totalPages=e.data.meta.total_pages}catch(e){this.status=e.response?.status||500,this.error=e.response?.data?.errors||"Internal server error. Please try again later."}finally{this.isLoading=!1}},async findWebsite(r){const{$axios:s}=i(),t=o();this.isLoading=!0,this.error=null;try{const a=await s.get(`/websites/${r}`,{headers:{Authorization:`${t.type} ${t.token}`}});this.status=a.status,this.items=a.data.data}catch(a){this.status=a.response?.status||500,this.error=a.response?.data?.errors||"Internal server error. Please try again later."}finally{this.isLoading=!1}},async deleteWebsite(r){const{$axios:s}=i(),t=h(),a=o();this.isLoading=!0,this.error=null;try{const e=await s.delete(`/websites/${r}`,{headers:{Authorization:`${a.type} ${a.token}`}});this.status=e.status,this.items=e.data.data,t.push("/admins/websites")}catch(e){this.status=e.response?.status||500,this.error=e.response?.data?.errors||"Internal server error. Please try again later."}finally{this.isLoading=!1}},async getResponseTimeWebsites(){const{$axios:r}=i(),s=o();this.isLoading=!0,this.error=null;try{const t=await r.get("/websites/response-time",{headers:{Authorization:`${s.type} ${s.token}`}});this.status=t.status,this.itemsResponseTime=t.data.data}catch(t){this.status=t.response?.status||500,this.error=t.response?.data?.errors||"Internal server error. Please try again later."}finally{this.isLoading=!1}},async getWebsiteAsc(){const{$axios:r}=i(),s=o();this.isLoading=!0,this.error=null;try{const t=await r.get("/websites/asc",{headers:{Authorization:`${s.type} ${s.token}`}});this.status=t.status,this.itemsAsc=t.data.data}catch(t){this.status=t.response?.status||500,this.error=t.response?.data?.errors||"Internal server error. Please try again later."}finally{this.isLoading=!1}},async getWebsiteDesc(){const{$axios:r}=i(),s=o();this.isLoading=!0,this.error=null;try{const t=await r.get("/websites/desc",{headers:{Authorization:`${s.type} ${s.token}`}});this.status=t.status,this.itemsDesc=t.data.data}catch(t){this.status=t.response?.status||500,this.error=t.response?.data?.errors||"Internal server error. Please try again later."}finally{this.isLoading=!1}},async checkWebsite(r){const{$axios:s}=i(),t=o();this.isLoading=!0,this.error=null;try{const a=await s.get(`/websites/${r}/check`,{headers:{Authorization:`${t.type} ${t.token}`}});this.status=a.status,this.items=a.data.data}catch(a){this.status=a.response?.status||500,this.error=a.response?.data?.errors||"Internal server error. Please try again later."}finally{this.isLoading=!1}},async checkAllWebsites(){const{$axios:r}=i(),s=o();this.isLoading=!0,this.error=null;try{const t=await r.get("/websites/check-all",{headers:{Authorization:`${s.type} ${s.token}`}});this.status=t.status,this.items=t.data.data}catch(t){this.status=t.response?.status||500,this.error=t.response?.data?.errors||"Internal server error. Please try again later."}finally{this.isLoading=!1}},async getHealthyCount(){const{$axios:r}=i(),s=o();this.isLoading=!0,this.error=null;try{const t=await r.get("/websites/healthy-count",{headers:{Authorization:`${s.type} ${s.token}`}});this.status=t.status,this.itemsHealthy=t.data.data}catch(t){this.status=t.response?.status||500,this.error=t.response?.data?.errors||"Internal server error. Please try again later."}finally{this.isLoading=!1}},async getDownWebsites(){const{$axios:r}=i(),s=o();this.isLoading=!0,this.error=null;try{const t=await r.get("/websites/down",{headers:{Authorization:`${s.type} ${s.token}`}});this.status=t.status,this.itemsDown=t.data.data}catch(t){this.status=t.response?.status||500,this.error=t.response?.data?.errors||"Internal server error. Please try again later."}finally{this.isLoading=!1}},async printReport(){const{$axios:r}=i(),s=o();this.isLoading=!0,this.error=null;try{const t=await r.get("/websites/report",{headers:{Authorization:`${s.type} ${s.token}`},responseType:"blob"});this.status=t.status;const a=window.URL.createObjectURL(new Blob([t.data])),e=document.createElement("a");e.href=a,e.setAttribute("download",`website_report_${new Date().toISOString()}.pdf`),document.body.appendChild(e),e.click(),e.remove(),window.URL.revokeObjectURL(a)}catch(t){this.status=t.response?.status||500,this.error=t.response?.data?.errors||"Internal server error. Please try again later."}finally{this.isLoading=!1}}}});export{d as u};
