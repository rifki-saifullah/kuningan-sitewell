import{l as h,aW as p,aT as x,ag as m,a0 as v}from"#entry";function y(t){return h(()=>p(t)?!!x(t)?.closest("form"):!0)}function C(t){const e=m("",1e3);return{search:e,handleTypeaheadSearch:(s,f)=>{e.value=e.value+s;{const r=v(),u=f.map(a=>({...a,textValue:a.value?.textValue??a.ref.textContent?.trim()??""})),c=u.find(a=>a.ref===r),n=u.map(a=>a.textValue),i=T(n,e.value,c?.textValue),d=u.find(a=>a.textValue===i);return d&&d.ref.focus(),d?.ref}},resetTypeahead:()=>{e.value=""}}}function V(t,e){return t.map((o,l)=>t[(e+l)%t.length])}function T(t,e,o){const s=e.length>1&&Array.from(e).every(n=>n===e[0])?e[0]:e,f=o?t.indexOf(o):-1;let r=V(t,Math.max(f,0));s.length===1&&(r=r.filter(n=>n!==o));const c=r.find(n=>n.toLowerCase().startsWith(s.toLowerCase()));return c!==o?c:void 0}export{C as a,y as u};
